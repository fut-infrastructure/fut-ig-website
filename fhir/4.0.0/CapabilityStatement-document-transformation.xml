<?xml version="1.0" encoding="UTF-8"?>

<CapabilityStatement xmlns="http://hl7.org/fhir">
  <id value="document-transformation"/>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml">document-transformation</div>
  </text>
  <url value="http://ehealth.sundhed.dk/fhir/CapabilityStatement/document-transformation"/>
  <version value="4.0.0"/>
  <name value="document-transformation"/>
  <status value="active"/>
  <date value="2025-08-07T09:01:32.473+00:00"/>
  <publisher value="Den telemedicinske infrastruktur (eHealth Infrastructure)"/>
  <contact>
    <name value="Den telemedicinske infrastruktur (eHealth Infrastructure)"/>
    <telecom>
      <system value="url"/>
      <value value="http://ehealth.sundhed.dk"/>
    </telecom>
  </contact>
  <jurisdiction>
    <coding>
      <system value="urn:iso:std:iso:3166"/>
      <code value="DK"/>
      <display value="Denmark"/>
    </coding>
  </jurisdiction>
  <kind value="instance"/>
  <software>
    <name value="document-transformation"/>
    <version value="1.27.0"/>
  </software>
  <implementation>
    <description value="eHealth document-transformation service"/>
    <url value="https://document-transformation.devtest.systematic-ehealth.com/fhir"/>
  </implementation>
  <fhirVersion value="4.0.1"/>
  <format value="application/fhir+xml"/>
  <format value="xml"/>
  <format value="application/fhir+json"/>
  <format value="json"/>
  <format value="application/x-turtle"/>
  <format value="ttl"/>
  <format value="html/json"/>
  <format value="html/xml"/>
  <format value="html/turtle"/>
  <rest>
    <mode value="server"/>
    <resource>
      <type value="Composition"/>
      <profile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-composition"/>
      <interaction>
        <code value="search-type"/>
      </interaction>
      <interaction>
        <code value="vread"/>
      </interaction>
      <interaction>
        <code value="read"/>
      </interaction>
      <interaction>
        <code value="delete"/>
      </interaction>
      <interaction>
        <code value="create"/>
      </interaction>
      <conditionalCreate value="true"/>
      <conditionalDelete value="multiple"/>
      <searchInclude value="Composition:related-ref"/>
      <searchRevInclude value="Composition:attester"/>
      <searchRevInclude value="Composition:author"/>
      <searchRevInclude value="Composition:encounter"/>
      <searchRevInclude value="Composition:entry"/>
      <searchRevInclude value="Composition:patient"/>
      <searchRevInclude value="Composition:related-ref"/>
      <searchRevInclude value="Composition:subject"/>
      <searchRevInclude value="DocumentReference:authenticator"/>
      <searchRevInclude value="DocumentReference:author"/>
      <searchRevInclude value="DocumentReference:custodian"/>
      <searchRevInclude value="DocumentReference:encounter"/>
      <searchRevInclude value="DocumentReference:patient"/>
      <searchRevInclude value="DocumentReference:related"/>
      <searchRevInclude value="DocumentReference:related-ref"/>
      <searchRevInclude value="DocumentReference:relatesto"/>
      <searchRevInclude value="DocumentReference:subject"/>
      <searchParam>
        <name value="_content"/>
        <type value="string"/>
        <documentation value="Search the contents of the resource's data using a fulltext search"/>
      </searchParam>
      <searchParam>
        <name value="_has"/>
        <type value="string"/>
        <documentation value="Return resources linked to by the given target"/>
      </searchParam>
      <searchParam>
        <name value="_id"/>
        <type value="token"/>
        <documentation value="The ID of the resource"/>
      </searchParam>
      <searchParam>
        <name value="_language"/>
        <type value="string"/>
        <documentation value="The language of the resource"/>
      </searchParam>
      <searchParam>
        <name value="_lastUpdated"/>
        <type value="date"/>
        <documentation value="Only return resources which were last updated as specified by the given range"/>
      </searchParam>
      <searchParam>
        <name value="_profile"/>
        <type value="uri"/>
        <documentation value="Search for resources which have the given profile"/>
      </searchParam>
      <searchParam>
        <name value="_security"/>
        <type value="token"/>
        <documentation value="Search for resources which have the given security labels"/>
      </searchParam>
      <searchParam>
        <name value="_tag"/>
        <type value="token"/>
        <documentation value="Search for resources which have the given tag"/>
      </searchParam>
      <searchParam>
        <name value="_text"/>
        <type value="string"/>
        <documentation value="Search the contents of the resource's narrative using a fulltext search"/>
      </searchParam>
      <searchParam>
        <name value="attester"/>
        <type value="reference"/>
        <documentation value="Who attested the composition"/>
      </searchParam>
      <searchParam>
        <name value="author"/>
        <type value="reference"/>
        <documentation value="Who and/or what authored the composition"/>
      </searchParam>
      <searchParam>
        <name value="class"/>
        <type value="token"/>
        <documentation value="Categorization of Composition"/>
      </searchParam>
      <searchParam>
        <name value="confidentiality"/>
        <type value="token"/>
        <documentation value="As defined by affinity domain"/>
      </searchParam>
      <searchParam>
        <name value="context"/>
        <type value="token"/>
        <documentation value="Code(s) that apply to the event being documented"/>
      </searchParam>
      <searchParam>
        <name value="date"/>
        <type value="date"/>
        <documentation value="Composition editing time"/>
      </searchParam>
      <searchParam>
        <name value="encounter"/>
        <type value="reference"/>
        <documentation value="Context of the Composition"/>
      </searchParam>
      <searchParam>
        <name value="entry"/>
        <type value="reference"/>
        <documentation value="A reference to data that supports this section"/>
      </searchParam>
      <searchParam>
        <name value="identifier"/>
        <type value="token"/>
        <documentation value="Logical identifier of composition (version-independent)"/>
      </searchParam>
      <searchParam>
        <name value="patient"/>
        <type value="reference"/>
        <documentation value="Who and/or what the composition is about"/>
      </searchParam>
      <searchParam>
        <name value="period"/>
        <type value="date"/>
        <documentation value="The period covered by the documentation"/>
      </searchParam>
      <searchParam>
        <name value="related-id"/>
        <type value="token"/>
        <documentation value="Target of the relationship"/>
      </searchParam>
      <searchParam>
        <name value="related-ref"/>
        <type value="reference"/>
        <documentation value="Target of the relationship"/>
      </searchParam>
      <searchParam>
        <name value="section"/>
        <type value="token"/>
        <documentation value="Classification of section (recommended)"/>
      </searchParam>
      <searchParam>
        <name value="status"/>
        <type value="token"/>
        <documentation value="preliminary | final | amended | entered-in-error"/>
      </searchParam>
      <searchParam>
        <name value="subject"/>
        <type value="reference"/>
        <documentation value="Who and/or what the composition is about"/>
      </searchParam>
      <searchParam>
        <name value="title"/>
        <type value="string"/>
        <documentation value="Human Readable name/title"/>
      </searchParam>
      <searchParam>
        <name value="type"/>
        <type value="token"/>
        <documentation value="Kind of composition (LOINC if possible)"/>
      </searchParam>
      <operation>
        <name value="validate"/>
        <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/CompositionDocumentReference-it-validate"/>
      </operation>
    </resource>
    <resource>
      <type value="DocumentReference"/>
      <profile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-transformation-documentreference"/>
      <interaction>
        <code value="search-type"/>
      </interaction>
      <interaction>
        <code value="vread"/>
      </interaction>
      <interaction>
        <code value="read"/>
      </interaction>
      <interaction>
        <code value="patch"/>
      </interaction>
      <interaction>
        <code value="delete"/>
      </interaction>
      <interaction>
        <code value="create"/>
      </interaction>
      <conditionalCreate value="true"/>
      <conditionalDelete value="multiple"/>
      <searchInclude value="DocumentReference:relatesto"/>
      <searchRevInclude value="Composition:attester"/>
      <searchRevInclude value="Composition:author"/>
      <searchRevInclude value="Composition:encounter"/>
      <searchRevInclude value="Composition:entry"/>
      <searchRevInclude value="Composition:patient"/>
      <searchRevInclude value="Composition:related-ref"/>
      <searchRevInclude value="Composition:subject"/>
      <searchRevInclude value="DocumentReference:authenticator"/>
      <searchRevInclude value="DocumentReference:author"/>
      <searchRevInclude value="DocumentReference:custodian"/>
      <searchRevInclude value="DocumentReference:encounter"/>
      <searchRevInclude value="DocumentReference:patient"/>
      <searchRevInclude value="DocumentReference:related"/>
      <searchRevInclude value="DocumentReference:related-ref"/>
      <searchRevInclude value="DocumentReference:relatesto"/>
      <searchRevInclude value="DocumentReference:subject"/>
      <searchParam>
        <name value="_content"/>
        <type value="string"/>
        <documentation value="Search the contents of the resource's data using a fulltext search"/>
      </searchParam>
      <searchParam>
        <name value="_has"/>
        <type value="string"/>
        <documentation value="Return resources linked to by the given target"/>
      </searchParam>
      <searchParam>
        <name value="_id"/>
        <type value="token"/>
        <documentation value="The ID of the resource"/>
      </searchParam>
      <searchParam>
        <name value="_language"/>
        <type value="string"/>
        <documentation value="The language of the resource"/>
      </searchParam>
      <searchParam>
        <name value="_lastUpdated"/>
        <type value="date"/>
        <documentation value="Only return resources which were last updated as specified by the given range"/>
      </searchParam>
      <searchParam>
        <name value="_profile"/>
        <type value="uri"/>
        <documentation value="Search for resources which have the given profile"/>
      </searchParam>
      <searchParam>
        <name value="_security"/>
        <type value="token"/>
        <documentation value="Search for resources which have the given security labels"/>
      </searchParam>
      <searchParam>
        <name value="_tag"/>
        <type value="token"/>
        <documentation value="Search for resources which have the given tag"/>
      </searchParam>
      <searchParam>
        <name value="_text"/>
        <type value="string"/>
        <documentation value="Search the contents of the resource's narrative using a fulltext search"/>
      </searchParam>
      <searchParam>
        <name value="authenticator"/>
        <type value="reference"/>
        <documentation value="Who/what authenticated the document"/>
      </searchParam>
      <searchParam>
        <name value="author"/>
        <type value="reference"/>
        <documentation value="Who and/or what authored the document"/>
      </searchParam>
      <searchParam>
        <name value="class"/>
        <type value="token"/>
        <documentation value="Categorization of document"/>
      </searchParam>
      <searchParam>
        <name value="custodian"/>
        <type value="reference"/>
        <documentation value="Organization which maintains the document"/>
      </searchParam>
      <searchParam>
        <name value="date"/>
        <type value="date"/>
        <documentation value="Document creation time"/>
      </searchParam>
      <searchParam>
        <name value="description"/>
        <type value="string"/>
        <documentation value="Human-readable description (title)"/>
      </searchParam>
      <searchParam>
        <name value="documentSharingState"/>
        <type value="token"/>
        <documentation value="Sharing State of the Document"/>
      </searchParam>
      <searchParam>
        <name value="encounter"/>
        <type value="reference"/>
        <documentation value="Context of the document  content"/>
      </searchParam>
      <searchParam>
        <name value="event"/>
        <type value="token"/>
        <documentation value="Main clinical acts documented"/>
      </searchParam>
      <searchParam>
        <name value="facility"/>
        <type value="token"/>
        <documentation value="Kind of facility where patient was seen"/>
      </searchParam>
      <searchParam>
        <name value="format"/>
        <type value="token"/>
        <documentation value="Format/content rules for the document"/>
      </searchParam>
      <searchParam>
        <name value="identifier"/>
        <type value="token"/>
        <documentation value="Master Version Specific Identifier"/>
      </searchParam>
      <searchParam>
        <name value="indexed"/>
        <type value="date"/>
        <documentation value="When this document reference was created"/>
      </searchParam>
      <searchParam>
        <name value="language"/>
        <type value="token"/>
        <documentation value="Human language of the content (BCP-47)"/>
      </searchParam>
      <searchParam>
        <name value="location"/>
        <type value="uri"/>
        <documentation value="Uri where the data can be found"/>
      </searchParam>
      <searchParam>
        <name value="masterIdentifier"/>
        <type value="token"/>
        <documentation value="Master identifier"/>
      </searchParam>
      <searchParam>
        <name value="patient"/>
        <type value="reference"/>
        <documentation value="Who/what is the subject of the document"/>
      </searchParam>
      <searchParam>
        <name value="period"/>
        <type value="date"/>
        <documentation value="Time of service that is being documented"/>
      </searchParam>
      <searchParam>
        <name value="related"/>
        <type value="reference"/>
        <documentation value="Related identifiers or resources"/>
      </searchParam>
      <searchParam>
        <name value="related-id"/>
        <type value="token"/>
        <documentation value="Identifier of related objects or events"/>
      </searchParam>
      <searchParam>
        <name value="related-ref"/>
        <type value="reference"/>
        <documentation value="Related Resource"/>
      </searchParam>
      <searchParam>
        <name value="relatesto"/>
        <type value="reference"/>
        <documentation value="Target of the relationship"/>
      </searchParam>
      <searchParam>
        <name value="relation"/>
        <type value="token"/>
        <documentation value="replaces | transforms | signs | appends"/>
      </searchParam>
      <searchParam>
        <name value="relationship"/>
        <type value="composite"/>
        <documentation value="Combination of relation and relatesTo"/>
      </searchParam>
      <searchParam>
        <name value="securitylabel"/>
        <type value="token"/>
        <documentation value="Document security-tags"/>
      </searchParam>
      <searchParam>
        <name value="setting"/>
        <type value="token"/>
        <documentation value="Additional details about where the content was created (e.g. clinical specialty)"/>
      </searchParam>
      <searchParam>
        <name value="status"/>
        <type value="token"/>
        <documentation value="current | superseded | entered-in-error"/>
      </searchParam>
      <searchParam>
        <name value="subject"/>
        <type value="reference"/>
        <documentation value="Who/what is the subject of the document"/>
      </searchParam>
      <searchParam>
        <name value="type"/>
        <type value="token"/>
        <documentation value="Kind of document (LOINC if possible)"/>
      </searchParam>
      <operation>
        <name value="validate"/>
        <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/CompositionDocumentReference-it-validate"/>
      </operation>
      <operation>
        <name value="deprecate-document"/>
        <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/DocumentReference-t-deprecate-document"/>
        <documentation value="Deprecates a shared document. The operation takes a documentIdentifier and cpr-number as parameters and finds the DocumentReference with the corresponding masterIdentifier. masterIdentifier should be unique for DocumentReference so if less than 0 or more than 1 are found the operation throws and exception. If the found documentReference has a patient which cpr number matches the provided value the document is deprecated. iti-57 is used to deprecate the document on XDS. On successthe documentReference status is updated to superseded and updated in the database."/>
      </operation>
    </resource>
    <resource>
      <type value="OperationDefinition"/>
      <profile value="http://hl7.org/fhir/StructureDefinition/OperationDefinition"/>
      <interaction>
        <code value="read"/>
      </interaction>
      <searchInclude value="*"/>
      <searchRevInclude value="Composition:attester"/>
      <searchRevInclude value="Composition:author"/>
      <searchRevInclude value="Composition:encounter"/>
      <searchRevInclude value="Composition:entry"/>
      <searchRevInclude value="Composition:patient"/>
      <searchRevInclude value="Composition:related-ref"/>
      <searchRevInclude value="Composition:subject"/>
      <searchRevInclude value="DocumentReference:authenticator"/>
      <searchRevInclude value="DocumentReference:author"/>
      <searchRevInclude value="DocumentReference:custodian"/>
      <searchRevInclude value="DocumentReference:encounter"/>
      <searchRevInclude value="DocumentReference:patient"/>
      <searchRevInclude value="DocumentReference:related"/>
      <searchRevInclude value="DocumentReference:related-ref"/>
      <searchRevInclude value="DocumentReference:relatesto"/>
      <searchRevInclude value="DocumentReference:subject"/>
    </resource>
    <operation>
      <name value="migrate"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-migrate"/>
      <documentation value="Data migration"/>
    </operation>
    <operation>
      <name value="upload-QFDD"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-upload-QFDD"/>
      <documentation value="Uploads an DK-HL7 Questionnaire Form Definition Document (QFDD). The input FHIR DocumentReference must be of type QFDD (74468-0) and the status set to current. Include an attachment which contains the base64 encoded QFDD XML document with contentType application/xml. The QFDD XML document must contain a unique id which is used as the the masterIdentifier in the DocumentReference. The returned FHIR DocumentReference contains a masterIdentifier, a type and the description all pulled from the attachment."/>
    </operation>
    <operation>
      <name value="transform-to-QRD"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-transform-to-QRD"/>
      <documentation value="Transforms a FHIR QuestionnaireResponse (ehealth-questionnaireresponse profile) resource to a DK-HL7 Questionnaire Response Document (QRD) XML document. The input FHIR Bundle contains FHIR Composition (ehealth-composition profile) resource referencing a FHIR QuestionnaireResponse resource. a FHIR Questionnaire resource. The bundle must also contain a FHIR DocumentReference containing a QFDD xml file (base64 encoded)The returned FHIR DocumentReference contains the QRD XML document adhering to the DK-HL7 Questionnaire Response Document profile."/>
    </operation>
    <operation>
      <name value="transform-to-QFDD"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-transform-to-QFDD"/>
      <documentation value="Transforms an eHealth Questionnaire resource to the DK-HL7 Questionnaire Form Definition Document (QFDD). The input Bundle contains an eHealth Questionnaire and Composition resource which reference the returned eHealth Questionnaire. The returned Bundle in case of no validation errors contains the FHIR DocumentReference containing the QFDD XML for the DK-HL7 Questionnaire Form Definition Document and an OperationOutcome will possible warnings. In case of validation errors the Bundle will only contain an OperationOutcome with the validation errors/warnings."/>
    </operation>
    <operation>
      <name value="transform-to-PHMR"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-transform-to-PHMR"/>
      <documentation value="Transforms a FHIR Observation (ehealth-observation profile) resource to a DK-HL7 Personal Health Monitoring Report (PHMR) XML document. The input FHIR Bundle contains a FHIR Composition (ehealth-composition profile) resource referencing one or more FHIR Observation (ehealth-observation profile) resources and referenced resources such as FHIR Organization. The returned FHIR DocumentReference contains the PHMR XML document adhering to the DK-HL7 Personal Health Monitoring Report profile."/>
    </operation>
    <operation>
      <name value="transform-to-APD"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-transform-to-APD"/>
      <documentation value="Transforms a FHIR Appointment (ehealth-appointment profile) resource to a DK-HL7 Appointment Document (APD) XML document. The input FHIR Bundle contains a FHIR Composition (ehealth-composition profile) resource referencing a FHIR Appointment (ehealth-appointment profile) resource and referenced resources such as FHIR Organization. The returned FHIR DocumentReference contains the APD XML document adhering to the DK-HL7 Appointment Document profile."/>
    </operation>
    <operation>
      <name value="transform-from-QRD-based-on-questionnaire"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-transform-from-QRD-based-on-questionnaire"/>
      <documentation value="Transforms a DK-HL7 Questionnaire Response Document (QRD) XML document to a FHIR QuestionnaireResponse (ehealth-questionnaireresponse profile) resource. The input bundle must contain the QRD XML document adhering to the DK-HL7 Questionnaire Response Document profile. And a FHIR Questionnaire resource. The returned FHIR Bundle contains FHIR Composition (ehealth-composition profile) resource referencing a FHIR QuestionnaireResponse (ehealth-documentreference profile) resource."/>
    </operation>
    <operation>
      <name value="transform-from-QRD"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-transform-from-QRD"/>
      <documentation value="Transforms a DK-HL7 Questionnaire Response Document (QRD) XML document to a FHIR QuestionnaireResponse (ehealth-questionnaireresponse profile) resource. The input FHIR DocumentReference contains the QRD XML document adhering to the DK-HL7 Questionnaire Response Document profile. The returned FHIR Bundle contains FHIR Composition (ehealth-composition profile) resource referencing a FHIR QuestionnaireResponse (ehealth-documentreference profile) resource."/>
    </operation>
    <operation>
      <name value="transform-from-QFDD"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-transform-from-QFDD"/>
      <documentation value="Transforms the DK-HL7 Questionnaire Form Definition Document (QFDD) to an eHealth Questionnaire resource. The input FHIR DocumentReference contains QFDD XML for the DK-HL7 Questionnaire Form Definition Document. The returned Bundle contains the eHealth Questionnaire and Composition resource which reference the returned eHealth Questionnaire."/>
    </operation>
    <operation>
      <name value="transform-from-PHMR"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-transform-from-PHMR"/>
      <documentation value="Transforms a DK-HL7 Personal Health Monitoring Report (PHMR) XML document to FHIR Observation (ehealth-observation profile) resource. The input FHIR DocumentReference contains the PHMR XML document adhering to the DK-HL7 Personal Health Monitoring Report profile The returned FHIR Bundle contains a FHIR Composition (ehealth-composition profile) resource referencing.one or more FHIR Observation (ehealth-observation profile) resources and referenced resources such as FHIR Organization."/>
    </operation>
    <operation>
      <name value="transform-from-APD"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-transform-from-APD"/>
      <documentation value="Transforms a DK-HL7 Appointment Document (APD) XML document to a FHIR Appointment (ehealth-appointment profile) resource. The input FHIR DocumentReference (ehealth-documentreference profile) contains the APD XML document. The caller must ensure that the APD XML document is valid and adheres to the DK-HL7 Appointment Document profile. The returned FHIR Bundle contains a FHIR Composition (ehealth-composition profile) resource referencing a FHIR Appointment (ehealth-appointment profile) resource."/>
    </operation>
    <operation>
      <name value="reindex-terminology"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-reindex-terminology"/>
    </operation>
    <operation>
      <name value="meta"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-meta"/>
    </operation>
    <operation>
      <name value="get-resource-counts"/>
      <definition value="https://document-transformation.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-get-resource-counts"/>
      <documentation value="Provides the number of resources currently stored on the server, broken down by resource type"/>
    </operation>
  </rest>
</CapabilityStatement>