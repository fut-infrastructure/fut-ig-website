<?xml version="1.0" encoding="UTF-8"?>

<CapabilityStatement xmlns="http://hl7.org/fhir">
  <id value="task"/>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml">task</div>
  </text>
  <url value="http://ehealth.sundhed.dk/fhir/CapabilityStatement/task"/>
  <version value="4.0.0"/>
  <name value="task"/>
  <status value="active"/>
  <date value="2025-08-07T09:00:16.298+00:00"/>
  <publisher value="Den telemedicinske infrastruktur (eHealth Infrastructure)"/>
  <contact>
    <name value="Den telemedicinske infrastruktur (eHealth Infrastructure)"/>
    <telecom>
      <system value="url"/>
      <value value="http://ehealth.sundhed.dk"/>
    </telecom>
  </contact>
  <jurisdiction>
    <coding>
      <system value="urn:iso:std:iso:3166"/>
      <code value="DK"/>
      <display value="Denmark"/>
    </coding>
  </jurisdiction>
  <kind value="instance"/>
  <software>
    <name value="task"/>
    <version value="1.26.0"/>
  </software>
  <implementation>
    <description value="eHealth task service"/>
    <url value="https://task.devtest.systematic-ehealth.com/fhir"/>
  </implementation>
  <fhirVersion value="4.0.1"/>
  <format value="application/fhir+xml"/>
  <format value="xml"/>
  <format value="application/fhir+json"/>
  <format value="json"/>
  <format value="application/x-turtle"/>
  <format value="ttl"/>
  <format value="html/json"/>
  <format value="html/xml"/>
  <format value="html/turtle"/>
  <rest>
    <mode value="server"/>
    <resource>
      <type value="ClinicalImpression"/>
      <profile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-clinicalimpression"/>
      <interaction>
        <code value="search-type"/>
      </interaction>
      <interaction>
        <code value="vread"/>
      </interaction>
      <interaction>
        <code value="read"/>
      </interaction>
      <interaction>
        <code value="patch"/>
      </interaction>
      <interaction>
        <code value="create"/>
      </interaction>
      <conditionalCreate value="true"/>
      <searchInclude value="ClinicalImpression:previous"/>
      <searchRevInclude value="ClinicalImpression:action"/>
      <searchRevInclude value="ClinicalImpression:assessor"/>
      <searchRevInclude value="ClinicalImpression:carePlan"/>
      <searchRevInclude value="ClinicalImpression:episodeOfCare"/>
      <searchRevInclude value="ClinicalImpression:finding-ref"/>
      <searchRevInclude value="ClinicalImpression:investigation"/>
      <searchRevInclude value="ClinicalImpression:patient"/>
      <searchRevInclude value="ClinicalImpression:previous"/>
      <searchRevInclude value="ClinicalImpression:problem"/>
      <searchRevInclude value="ClinicalImpression:subject"/>
      <searchRevInclude value="Task:based-on"/>
      <searchRevInclude value="Task:episodeOfCare"/>
      <searchRevInclude value="Task:focus"/>
      <searchRevInclude value="Task:owner"/>
      <searchRevInclude value="Task:part-of"/>
      <searchRevInclude value="Task:patient"/>
      <searchRevInclude value="Task:requester"/>
      <searchRevInclude value="Task:responsible"/>
      <searchRevInclude value="Task:subject"/>
      <searchParam>
        <name value="_content"/>
        <type value="string"/>
        <documentation value="Search the contents of the resource's data using a fulltext search"/>
      </searchParam>
      <searchParam>
        <name value="_has"/>
        <type value="string"/>
        <documentation value="Return resources linked to by the given target"/>
      </searchParam>
      <searchParam>
        <name value="_id"/>
        <type value="token"/>
        <documentation value="The ID of the resource"/>
      </searchParam>
      <searchParam>
        <name value="_language"/>
        <type value="string"/>
        <documentation value="The language of the resource"/>
      </searchParam>
      <searchParam>
        <name value="_lastUpdated"/>
        <type value="date"/>
        <documentation value="Only return resources which were last updated as specified by the given range"/>
      </searchParam>
      <searchParam>
        <name value="_profile"/>
        <type value="uri"/>
        <documentation value="Search for resources which have the given profile"/>
      </searchParam>
      <searchParam>
        <name value="_security"/>
        <type value="token"/>
        <documentation value="Search for resources which have the given security labels"/>
      </searchParam>
      <searchParam>
        <name value="_tag"/>
        <type value="token"/>
        <documentation value="Search for resources which have the given tag"/>
      </searchParam>
      <searchParam>
        <name value="_text"/>
        <type value="string"/>
        <documentation value="Search the contents of the resource's narrative using a fulltext search"/>
      </searchParam>
      <searchParam>
        <name value="action"/>
        <type value="reference"/>
        <documentation value="Action taken as part of assessment procedure"/>
      </searchParam>
      <searchParam>
        <name value="assessor"/>
        <type value="reference"/>
        <documentation value="The clinician performing the assessment"/>
      </searchParam>
      <searchParam>
        <name value="carePlan"/>
        <type value="reference"/>
        <documentation value="CarePlan"/>
      </searchParam>
      <searchParam>
        <name value="date"/>
        <type value="date"/>
        <documentation value="When the assessment was documented"/>
      </searchParam>
      <searchParam>
        <name value="decision"/>
        <type value="token"/>
        <documentation value="Decision"/>
      </searchParam>
      <searchParam>
        <name value="episodeOfCare"/>
        <type value="reference"/>
        <documentation value="Encounter or Episode created from"/>
      </searchParam>
      <searchParam>
        <name value="finding-code"/>
        <type value="token"/>
        <documentation value="What was found"/>
      </searchParam>
      <searchParam>
        <name value="finding-ref"/>
        <type value="reference"/>
        <documentation value="What was found"/>
      </searchParam>
      <searchParam>
        <name value="identifier"/>
        <type value="token"/>
        <documentation value="Business identifier"/>
      </searchParam>
      <searchParam>
        <name value="investigation"/>
        <type value="reference"/>
        <documentation value="Record of a specific investigation"/>
      </searchParam>
      <searchParam>
        <name value="patient"/>
        <type value="reference"/>
        <documentation value="Patient or group assessed"/>
      </searchParam>
      <searchParam>
        <name value="previous"/>
        <type value="reference"/>
        <documentation value="Reference to last assessment"/>
      </searchParam>
      <searchParam>
        <name value="problem"/>
        <type value="reference"/>
        <documentation value="Relevant impressions of patient state"/>
      </searchParam>
      <searchParam>
        <name value="status"/>
        <type value="token"/>
        <documentation value="draft | completed | entered-in-error"/>
      </searchParam>
      <searchParam>
        <name value="subject"/>
        <type value="reference"/>
        <documentation value="Patient or group assessed"/>
      </searchParam>
      <operation>
        <name value="validate"/>
        <definition value="https://task.devtest.systematic-ehealth.com/fhir/OperationDefinition/ClinicalImpressionTask-it-validate"/>
      </operation>
      <operation>
        <name value="set-measurement-validity"/>
        <definition value="https://task.devtest.systematic-ehealth.com/fhir/OperationDefinition/ClinicalImpression-t-set-measurement-validity"/>
        <documentation value="This operation is used to invalidate or retract an invalidation of a Measurement.&#xD;&#xA;## Input&#xD;&#xA;The input parameter is a ClinicalImpression resource with the following values:&#xD;&#xA;- `status` - The status of the ClinicalImpression must be `completed`.&#xD;&#xA;- `investigation.item` - Versioned reference to the Measurement that is to be invalidated or retracted.&#xD;&#xA;- `investigation.item` - Unversioned reference to the Measurement that is to be invalidated or retracted.&#xD;&#xA;- `subject` - Reference to the Patient .&#xD;&#xA;- `episodeOfCare` - Reference to the EpisodeOfCare that the Measurement is part of.&#xD;&#xA;- `code` - Should use `MeasurementAssessment` from `http://ehealth.sundhed.dk/cs/clinicalimpression-codes`.&#xD;&#xA;- `finding.code` - The finding code must be `measurement-invalidated` or `measurement-invalidation-retracted`.&#xD;&#xA;- `decision` - The decision code is required if `finding.code` is `measurement-invalidated`. The decision code must be `invalidated-fulfills` or `invalidated-is-not-fulfillment`.&#xD;&#xA;## Output&#xD;&#xA;The operation returns the persisted ClinicalImpression:&#xD;&#xA;- `clinicalImpression` - The persisted ClinicalImpression resource with updated assessor values.&#xD;&#xA;## Operation side effects&#xD;&#xA;- The operation will update the status of the Measurement that is being invalidated or has the invalidation retracted to `entered-in-error` or `completed` respectively.&#xD;&#xA;- The operation will update the status to `entered-in-error` for any previous invalidation or invalidation retraction ClinicalImpression for the referenced Measurement, indicating that the previous ClinicalImpression is no longer used to represent the validity of the Measurement. The operation performs a search for any existing ClinicalImpression in the measurement validity cycle, and does not rely on/update the `previous` field on the input ClinicalImpression. If the input ClinicalImpression is for invalidation retraction, there must exist a ClinicalImpression invalidating the Measurement.&#xD;&#xA;- The operation will add an additional investigation with the code `item-modified`, referencing the Measurement version after the patch has been applied.&#xD;&#xA;- The operation will set assessor values (assessor, assessorOrganization and assessorOther). If the user is of type PRACTITIONER, assessor and assessorOrganization will be set. If the user is of type PATIENT, assessorOther will be set`."/>
      </operation>
    </resource>
    <resource>
      <type value="OperationDefinition"/>
      <profile value="http://hl7.org/fhir/StructureDefinition/OperationDefinition"/>
      <interaction>
        <code value="read"/>
      </interaction>
      <searchInclude value="*"/>
      <searchRevInclude value="ClinicalImpression:action"/>
      <searchRevInclude value="ClinicalImpression:assessor"/>
      <searchRevInclude value="ClinicalImpression:carePlan"/>
      <searchRevInclude value="ClinicalImpression:episodeOfCare"/>
      <searchRevInclude value="ClinicalImpression:finding-ref"/>
      <searchRevInclude value="ClinicalImpression:investigation"/>
      <searchRevInclude value="ClinicalImpression:patient"/>
      <searchRevInclude value="ClinicalImpression:previous"/>
      <searchRevInclude value="ClinicalImpression:problem"/>
      <searchRevInclude value="ClinicalImpression:subject"/>
      <searchRevInclude value="Task:based-on"/>
      <searchRevInclude value="Task:episodeOfCare"/>
      <searchRevInclude value="Task:focus"/>
      <searchRevInclude value="Task:owner"/>
      <searchRevInclude value="Task:part-of"/>
      <searchRevInclude value="Task:patient"/>
      <searchRevInclude value="Task:requester"/>
      <searchRevInclude value="Task:responsible"/>
      <searchRevInclude value="Task:subject"/>
    </resource>
    <resource>
      <type value="Task"/>
      <profile value="http://ehealth.sundhed.dk/fhir/StructureDefinition/ehealth-task"/>
      <interaction>
        <code value="search-type"/>
      </interaction>
      <interaction>
        <code value="vread"/>
      </interaction>
      <interaction>
        <code value="read"/>
      </interaction>
      <interaction>
        <code value="patch"/>
      </interaction>
      <interaction>
        <code value="create"/>
      </interaction>
      <conditionalCreate value="true"/>
      <searchInclude value="Task:based-on"/>
      <searchInclude value="Task:focus"/>
      <searchInclude value="Task:part-of"/>
      <searchRevInclude value="ClinicalImpression:action"/>
      <searchRevInclude value="ClinicalImpression:assessor"/>
      <searchRevInclude value="ClinicalImpression:carePlan"/>
      <searchRevInclude value="ClinicalImpression:episodeOfCare"/>
      <searchRevInclude value="ClinicalImpression:finding-ref"/>
      <searchRevInclude value="ClinicalImpression:investigation"/>
      <searchRevInclude value="ClinicalImpression:patient"/>
      <searchRevInclude value="ClinicalImpression:previous"/>
      <searchRevInclude value="ClinicalImpression:problem"/>
      <searchRevInclude value="ClinicalImpression:subject"/>
      <searchRevInclude value="Task:based-on"/>
      <searchRevInclude value="Task:episodeOfCare"/>
      <searchRevInclude value="Task:focus"/>
      <searchRevInclude value="Task:owner"/>
      <searchRevInclude value="Task:part-of"/>
      <searchRevInclude value="Task:patient"/>
      <searchRevInclude value="Task:requester"/>
      <searchRevInclude value="Task:responsible"/>
      <searchRevInclude value="Task:subject"/>
      <searchParam>
        <name value="_content"/>
        <type value="string"/>
        <documentation value="Search the contents of the resource's data using a fulltext search"/>
      </searchParam>
      <searchParam>
        <name value="_has"/>
        <type value="string"/>
        <documentation value="Return resources linked to by the given target"/>
      </searchParam>
      <searchParam>
        <name value="_id"/>
        <type value="token"/>
        <documentation value="The ID of the resource"/>
      </searchParam>
      <searchParam>
        <name value="_language"/>
        <type value="string"/>
        <documentation value="The language of the resource"/>
      </searchParam>
      <searchParam>
        <name value="_lastUpdated"/>
        <type value="date"/>
        <documentation value="Only return resources which were last updated as specified by the given range"/>
      </searchParam>
      <searchParam>
        <name value="_profile"/>
        <type value="uri"/>
        <documentation value="Search for resources which have the given profile"/>
      </searchParam>
      <searchParam>
        <name value="_security"/>
        <type value="token"/>
        <documentation value="Search for resources which have the given security labels"/>
      </searchParam>
      <searchParam>
        <name value="_tag"/>
        <type value="token"/>
        <documentation value="Search for resources which have the given tag"/>
      </searchParam>
      <searchParam>
        <name value="_text"/>
        <type value="string"/>
        <documentation value="Search the contents of the resource's narrative using a fulltext search"/>
      </searchParam>
      <searchParam>
        <name value="authored-on"/>
        <type value="date"/>
        <documentation value="Search by creation date"/>
      </searchParam>
      <searchParam>
        <name value="based-on"/>
        <type value="reference"/>
        <documentation value="Search by requests this task is based on"/>
      </searchParam>
      <searchParam>
        <name value="business-status"/>
        <type value="token"/>
        <documentation value="Search by business status"/>
      </searchParam>
      <searchParam>
        <name value="category"/>
        <type value="token"/>
        <documentation value="Search by category"/>
      </searchParam>
      <searchParam>
        <name value="code"/>
        <type value="token"/>
        <documentation value="Search by task code"/>
      </searchParam>
      <searchParam>
        <name value="episodeOfCare"/>
        <type value="reference"/>
        <documentation value="Search by encounter or episode"/>
      </searchParam>
      <searchParam>
        <name value="focus"/>
        <type value="reference"/>
        <documentation value="Search by task focus"/>
      </searchParam>
      <searchParam>
        <name value="group-identifier"/>
        <type value="token"/>
        <documentation value="Search by group identifier"/>
      </searchParam>
      <searchParam>
        <name value="identifier"/>
        <type value="token"/>
        <documentation value="Search for a task instance by its business identifier"/>
      </searchParam>
      <searchParam>
        <name value="intent"/>
        <type value="token"/>
        <documentation value="Search by task intent"/>
      </searchParam>
      <searchParam>
        <name value="modified"/>
        <type value="date"/>
        <documentation value="Search by last modification date"/>
      </searchParam>
      <searchParam>
        <name value="owner"/>
        <type value="reference"/>
        <documentation value="Search by task owner"/>
      </searchParam>
      <searchParam>
        <name value="part-of"/>
        <type value="reference"/>
        <documentation value="Search by task this task is part of"/>
      </searchParam>
      <searchParam>
        <name value="patient"/>
        <type value="reference"/>
        <documentation value="Search by patient"/>
      </searchParam>
      <searchParam>
        <name value="performer"/>
        <type value="token"/>
        <documentation value="Search by recommended type of performer (e.g., Requester, Performer, Scheduler)."/>
      </searchParam>
      <searchParam>
        <name value="period"/>
        <type value="date"/>
        <documentation value="Search by period Task is/was underway"/>
      </searchParam>
      <searchParam>
        <name value="priority"/>
        <type value="token"/>
        <documentation value="Search by task priority"/>
      </searchParam>
      <searchParam>
        <name value="requester"/>
        <type value="reference"/>
        <documentation value="Search by task requester"/>
      </searchParam>
      <searchParam>
        <name value="resolvedTimingEnd"/>
        <type value="date"/>
        <documentation value="Resolved Timing end"/>
      </searchParam>
      <searchParam>
        <name value="resolvedTimingServiceRequestVersionId"/>
        <type value="token"/>
        <documentation value="Resolved Timing serviceRequestVersionID"/>
      </searchParam>
      <searchParam>
        <name value="resolvedTimingStart"/>
        <type value="date"/>
        <documentation value="Resolved Timing start"/>
      </searchParam>
      <searchParam>
        <name value="resolvedTimingType"/>
        <type value="token"/>
        <documentation value="Resolved Timing type"/>
      </searchParam>
      <searchParam>
        <name value="responsible"/>
        <type value="reference"/>
        <documentation value="Search by responsible"/>
      </searchParam>
      <searchParam>
        <name value="restriction-category"/>
        <type value="token"/>
        <documentation value="Search by restriction category"/>
      </searchParam>
      <searchParam>
        <name value="status"/>
        <type value="token"/>
        <documentation value="Search by task status"/>
      </searchParam>
      <searchParam>
        <name value="subject"/>
        <type value="reference"/>
        <documentation value="Search by subject"/>
      </searchParam>
      <operation>
        <name value="validate"/>
        <definition value="https://task.devtest.systematic-ehealth.com/fhir/OperationDefinition/ClinicalImpressionTask-it-validate"/>
      </operation>
    </resource>
    <operation>
      <name value="migrate"/>
      <definition value="https://task.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-migrate"/>
      <documentation value="Data migration"/>
    </operation>
    <operation>
      <name value="reindex-terminology"/>
      <definition value="https://task.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-reindex-terminology"/>
    </operation>
    <operation>
      <name value="meta"/>
      <definition value="https://task.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-meta"/>
    </operation>
    <operation>
      <name value="get-resource-counts"/>
      <definition value="https://task.devtest.systematic-ehealth.com/fhir/OperationDefinition/-s-get-resource-counts"/>
      <documentation value="Provides the number of resources currently stored on the server, broken down by resource type"/>
    </operation>
  </rest>
</CapabilityStatement>